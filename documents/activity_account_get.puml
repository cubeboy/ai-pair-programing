@startuml Activity Diagram - Get Account

!theme plain
title 회계 관리 솔루션 - 계정과목 조회 액티비티 다이어그램

|Client|
start
:계정과목 조회 요청;

if (요청 타입 확인) then (단일 계정 조회)
    :GET /api/v1/accounts/{id};
    
    |AccountController|
    :계정 ID 파싱;
    
    |AccountService|
    :계정 ID로 조회;
    
    |AccountRepositoryImpl|
    :데이터베이스에서 계정 조회;
    
    if (계정 존재?) then (no)
        |AccountService|
        :예외 발생\n"계정 없음";
        |Client|
        :404 Not Found 응답;
        stop
    else (yes)
        |AccountRepositoryImpl|
        :JPA 엔티티를 도메인 객체로 변환;
        
        |AccountController|
        :Account를 AccountResponse로 변환;
        
        |Client|
        :200 OK 응답\n(AccountResponse);
    endif

else (계정 목록 조회)
    :GET /api/v1/accounts;
    
    |AccountController|
    if (타입 파라미터 존재?) then (yes)
        :타입별 조회 요청;
        
        |AccountService|
        :지정된 타입의 계정 조회;
        note right
            AccountType으로 필터링
            (ASSET, LIABILITY, EQUITY, 
             REVENUE, EXPENSE)
        end note
        
    else (no)
        :전체 활성 계정 조회 요청;
        
        |AccountService|
        :모든 활성 계정 조회;
        note right
            is_active = true인 계정만
            계정코드 순으로 정렬
        end note
    endif
    
    |AccountRepositoryImpl|
    :데이터베이스에서 계정 목록 조회;
    :JPA 엔티티 리스트를 도메인 객체 리스트로 변환;
    
    |AccountController|
    :Account 리스트를 AccountResponse 리스트로 변환;
    
    |Client|
    :200 OK 응답\n(List<AccountResponse>);
endif

stop

@enduml
